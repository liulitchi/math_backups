# 一道运筹学的习题

副标题可写作：我是如何转向共产主义的

去年和朋友讨论过一道习题，出自 Hamdy Taha 的 Operations Research : An Introduction (2017版)，习题2.4-4,内容为：

`一间工厂连续四个月对外供货，每月订单分别为 520、720、 520 和 620 件。工厂有正式工 10 名，每人每月可加工 12件产品。如此一来，就需要向外界招收临时工来满足生产。每招聘一名临时工需花费 200 元，每解雇一名临时工需花费 400 元。临时工每月可加工 10 件产品。工厂每月可超额完成订单，但每月每件超额产品的保管费为 50 元。问工厂如何设计每月招聘或解雇的临时工，以压缩为最优化支出。`[^1]

本题有一点很明显：解雇花费远大于招聘花费。假设每个月可以灵活招聘或解雇临时工，则每月只存在单单招聘或者单单解雇的情况，不会让招聘和解雇同时出现。若某月需招聘一名临时工，花费 200 元，并不需要解雇一名同时招聘两名，如此，费用会飙升至 800 元。

接下来从最简单的方向入手，我们了解一下供货缺口（除了正式工正常生产外，每月还需补足的产品量）。

 - 第一个月： 520 - 12× 10 = 400 （件）

 - 第二个月： 720 - 12× 10 = 600 （件）

 - 第三个月： 520 - 12× 10 = 400  (件)

 - 第四个月： 620 - 12× 10 = 500 （件）

接下来我们设置一些参数。

\(x_i\): 每月(招聘或解雇后)的临时工数量，(i = 1,2,3,4)

\(h_i\): 每月招聘人数，（i = 1,2,3,4）

\(f_i\): 每月解雇人数， (i = 1,2,3,4)

\(I_i\): 每月完成供货后的库存量，（i = 1,2,3）

根据以上条件，可以给出以下数学表达：

\[min z = 50(I_1 + I_2 + I_3) + 200(h_1 + h_2 + h_3 + h_4) + 400(f_1 + f_2 + f_3 + f_4)\]

s.t. \[10x_1 = 400 + I_1\]
\[I_1 + 10x_2 = 600 + I_2\]
\[I_2 + 10x_3 = 400 + I_3\]
\[I_3 + 10x_4 = 500\]
\[x_1 = h_1 - f_1\]
\[x_2 = x_1 + h_2 - f_2\]
\[x_3 = x_2 + h_3 - f_3\]
\[x_4 = x_3 + h_4 - f_4\]
\[h_i >= 0, (i= 1,2,3,4)\]
\[x_i >= 0, (i= 1,2,3,4)\]
\[I_i >= 0, (i = 1,2,3)\]

借助 Maxima[^2] 或  Mathematica,得出以下结果：

  \(z = 19500, x_1 = 50, x_2 = 50, x_3 = 45, h_1 = 50, f_3 = 5, I_1 = 100, I_3 = 50\) 。同课本里使用 AMSL 软件 求出的答案是一致的，以上即为工厂的最优化支出




吗？
我们再次审题，会发现有一个在现实中不太可能出现的情景：临时工没有工资，只有招聘或解雇时有收入（我确信资本家会很乐意接受这个设定），此后他们就勤勤恳恳任劳任怨，直至被后浪拍死在沙滩上。

除去这项 bug ，我们主要关注的另一点是：解雇临时工的的花费远远大于招聘临时工的花费。我们试着做一个假设：每月只招收员工，而不解雇员工（社会主义国营企业为解决失业率而做出的妥协）。

可能有人要问了，制止解雇固然是好，可是你忽略了题干中另一项约束：产品库存保管费。员工增加，产品也相应增加，则库存保管费也会上升。如此一来，可能达不到最优化选择。

对此我的回答是：为什么要全力生产呢？假设某月最优生产量小于全效生产量，我们还有三个选择：

- 上策：批准优秀员工的假期（减少当月时间成本）。
- 中策：降低所有人的工作量（降低当月个人工作量）。
- 下策：满足当月生产需求，将多余人力资源转向其它工作（进一步榨取剩余价值）。

你觉得哪种方式合适呢？

别多想了，你只是生产线上一只忙个不停的蚂蚁，而非掌控全局的万能上帝。

言归正传，根据以上条件，我们设置几个参数。

\(I_i: 每月供货后的产品库存量，（i = 1,2,3,）。\)

\(Q_i: （假设每月正式工全力生产，除去 120 件后）临时工每月产品生产量， (i = 1,2,3,4)。\)

\(x_i: 每月招聘后的临时工数量， （i = 1,2,3,4）\)。

\(h_i: 每月招聘人数， （i = 1,2,3,4）。\)

则可以给出以下数学表述：

\[min z = 50(I_1 + I_2 + I_3) + 200x_4\]

s.t. \[I_1 = 120 + Q_1 - 520 = Q_1 - 400\]
     \[I_2 = I_1 + Q_2 + 120 - 720 = I_1 + Q_2 - 600\]
     \[I_3 = I_2 + Q_2 + 120 - 520 = I_2 + Q_3 - 400\]
	 \[I_3 + Q_4 = 620 - 120 = 500\]
	 \[Q_1 <= 10x_1\]
	 \[Q_2 <= 10x_2\]
	 \[Q_3 <= 10x_3\]
	 \[Q_4 <= 10x_4\]
	 \[x_1 = h_1\]
	 \[x_2 = x_1 + h_2\]
	 \[x_3 = x_2 + h_3\]
	 \[x_4 = x_3 + h_4\]
	 \[I_i >= 0, (i = 1,2,3)\]
	 \[Q_i >= 0, (i = 1,2,3,4)\]
	 \[x_i >= 0, (i = 1,2,3,4)\]
     \[h_i >= 0, (i = 1,2,3,4)\]

看到凭空多了这么多未知量，你可能感觉脑袋大了三圈。然而和我们担心的相反，我们只需把复杂的运算交给计算机（运筹学似乎偏爱未知量，讨厌不等式）。将上述约束条件带入 Maxima[^3] 或 Mathematica 中运算，得出的结果是：

\[z = 12000, h_1 = 40, h_2 = 20, h_3 = 0, h_4 = 0, Q_1 = 400, Q_2 = 600, Q_3 = 400, Q_4 = 500, I_1 = I_2 = I_3 = 0\]

由以上可知，第一个月招聘临时工 40 名， 第二个月招聘临时工 20 名，后续两个月不用招聘。同时我们注意到，第三个月共 70 名员工可以生产 720 件，但他们只需满足 520 件的市场需求即可，多余的人力资源可以投入其它有意义的事业上。

最后的最后，书里分析了极端的情况：四个月后卸磨杀驴，解雇所有临时工，并认为最优化条件仍不变，然而很不幸，我们会给出不同的答案。

  - 第一种方法，需解雇员工 45 名，总花费为： 19500 + 45 × 400 = 37500
  - 第二种方法，需解雇员工 60 名，总花费为： 12000 + 60 × 400 = 36000

仍旧是后一种方法更优化。

[^1]: 原题为 `A company is planning the manufacture of a product for March, April, May, and June of next year. The demand quantities are 520, 720, 520, and 620 units, respectively. The company has a steady workforce of 10 employees but can meet fluctuating production needs by hiring and firing temporary workers. The extra costs of hiring and firing a temp in any month are $200 and $400, respectively. A permanent worker produces 12 units per month, and a temporary worker, lacking equal experience, produces 10 units per month. The company can produce more than needed in any month and carry the surplus over to a succeeding month at a holding cost of $50 per unit per month. Develop an optimal hiring/firing policy over the 4-month planning horizon.`

[^2]: 代码为`
load("simplex")$
minimize_lp(50*(I1 + I2 + I3) + 200*(h1 + h2 + h3 + h4) + 400*(f1 + f2 + f3 + f4),
[10*x1 = I1 + 400,
I1 + 10*x2 = 600 + I2,
I2 + 10*x3 = 400 + I3,
I3 + 10*x4 = 500,
I3 + Q4 = 500,
x1 = h1 - f1,
x2 = x1 + h2 - f2,
x3 = x2 + h3 - f3,
x4 = x3 + h4 - f4]), nonnegative_lp = true;
`

[^3]: 代码为`
load("simplex")$
minimize_lp(50*(I1 + I2 + I3) + 200*x4,
[I1 = Q1 - 400,
I2 = I1 + Q2 - 600,
I3 = I2 + Q3 - 400,
I3 + Q4 = 500,
x1 = h1,
x2 = x1 + h2,
x3 = x2 + h3,
x4 = x3 + h4,
Q1 <= 10*x1,
Q2 <= 10*x2,
Q3 <= 10*x3,
Q4 <= 10*x4]), nonnegative_lp = true;
`
